'use strict';

angular.module('Northwind').controller('dashController', function ($scope, $q, simpleAPI, NgTableParams) {
  var vm = this;

  // vm.table = {base: '', join: ''}

  vm.dbHeaders = {
    base: ['', 'products', 'orders', 'customers', 'employees', 'suppliers', 'categories', 'shippers', 'order_id', 'territories', 'region', 'customerdemographics']
  };

  vm.submit = function (input) {
    console.log(input);
    simpleAPI.getDynamic(input, function (response) {
      vm.data = response.data;
      vm.headers = Object.keys(response.data[0]);
    });
  };

  vm.options = {
    chart: {
      type: 'stackedAreaChart',
      height: 450,
      margin: {
        top: 20,
        right: 20,
        bottom: 60,
        left: 40
      },
      x: function x(d) {
        return d[0];
      },
      y: function y(d) {
        return d[1];
      },
      useVoronoi: false,
      clipEdge: true,
      transitionDuration: 500,
      useInteractiveGuideline: true,
      xAxis: {
        showMaxMin: false,
        tickFormat: function tickFormat(d) {
          return d3.time.format('%x')(new Date(d));
        }
      },
      yAxis: {
        tickFormat: function tickFormat(d) {
          return d3.format(',.2f')(d);
        }
      }
    }
  };

  (function () {
    simpleAPI.extSalesMetrics(function (result) {
      console.log(result);
      vm.salesMetrics = result;
    });
  })();

  this.cols = [{
    field: "ProductName",
    title: "Product Name",
    sortable: "ProductName",
    show: true,
    groupable: "ProductName"
  }, {
    field: "OrderDate",
    title: "Order Date",
    sortable: "OrderDate",
    show: true,
    groupable: "OrderDate"
  }, {
    field: "ShipCity",
    title: "Ship City",
    sortable: "ShipCity",
    show: true,
    groupable: "ShipCity"
  }, {
    field: "ShipCountry",
    title: "Ship Country",
    sortable: "ShipCountry",
    show: true,
    groupable: "ShipCountry"
  }, {
    field: "ShippedDate",
    title: "Shipped Date",
    sortable: "ShippedDate",
    show: true,
    groupable: "ShippedDate"
  }, {
    field: "Quantity",
    title: "Quantity",
    show: true
  }, {
    field: "UnitPrice",
    title: "Unit Price",
    show: true
  }];
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBRTFCLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRTtBQUM3RSxNQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7Ozs7QUFJZCxJQUFFLENBQUMsU0FBUyxHQUFHO0FBQ2QsUUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQzVHLGFBQWEsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLENBQUM7R0FDaEQsQ0FBQTs7QUFFRCxJQUFFLENBQUMsTUFBTSxHQUFHLFVBQVUsS0FBSyxFQUFFO0FBQzVCLFdBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDbEIsYUFBUyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxRQUFRLEVBQUU7QUFDL0MsUUFBRSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3hCLFFBQUUsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDMUMsQ0FBQyxDQUFBO0dBQ0YsQ0FBQTs7QUFHRCxJQUFFLENBQUMsT0FBTyxHQUFHO0FBQ1QsU0FBSyxFQUFFO0FBQ0gsVUFBSSxFQUFFLGtCQUFrQjtBQUN4QixZQUFNLEVBQUUsR0FBRztBQUNYLFlBQU0sRUFBRztBQUNMLFdBQUcsRUFBRSxFQUFFO0FBQ1AsYUFBSyxFQUFFLEVBQUU7QUFDVCxjQUFNLEVBQUUsRUFBRTtBQUNWLFlBQUksRUFBRSxFQUFFO09BQ1g7QUFDRCxPQUFDLEVBQUUsV0FBUyxDQUFDLEVBQUM7QUFBQyxlQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUFDO0FBQzVCLE9BQUMsRUFBRSxXQUFTLENBQUMsRUFBQztBQUFDLGVBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQUM7QUFDNUIsZ0JBQVUsRUFBRSxLQUFLO0FBQ2pCLGNBQVEsRUFBRSxJQUFJO0FBQ2Qsd0JBQWtCLEVBQUUsR0FBRztBQUN2Qiw2QkFBdUIsRUFBRSxJQUFJO0FBQzdCLFdBQUssRUFBRTtBQUNILGtCQUFVLEVBQUUsS0FBSztBQUNqQixrQkFBVSxFQUFFLG9CQUFTLENBQUMsRUFBRTtBQUNwQixpQkFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQzNDO09BQ0o7QUFDRCxXQUFLLEVBQUU7QUFDSCxrQkFBVSxFQUFFLG9CQUFTLENBQUMsRUFBQztBQUNuQixpQkFBTyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQy9CO09BQ0o7S0FDSjtHQUNELENBQUM7O0FBRUYsR0FBQyxZQUFXO0FBQ1gsYUFBUyxDQUFDLGVBQWUsQ0FBQyxVQUFVLE1BQU0sRUFBRTtBQUMzQyxhQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BCLFFBQUUsQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDO0tBQ3pCLENBQUMsQ0FBQztHQUNILENBQUEsRUFBRyxDQUFDOztBQUVQLE1BQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNULFNBQUssRUFBRSxhQUFhO0FBQ3BCLFNBQUssRUFBRSxjQUFjO0FBQ3JCLFlBQVEsRUFBRSxhQUFhO0FBQ3ZCLFFBQUksRUFBRSxJQUFJO0FBQ1YsYUFBUyxFQUFFLGFBQWE7R0FDekIsRUFBRTtBQUNELFNBQUssRUFBRSxXQUFXO0FBQ2xCLFNBQUssRUFBRSxZQUFZO0FBQ25CLFlBQVEsRUFBRSxXQUFXO0FBQ3JCLFFBQUksRUFBRSxJQUFJO0FBQ1YsYUFBUyxFQUFFLFdBQVc7R0FDdkIsRUFBRTtBQUNELFNBQUssRUFBRSxVQUFVO0FBQ2pCLFNBQUssRUFBRSxXQUFXO0FBQ2xCLFlBQVEsRUFBRSxVQUFVO0FBQ3BCLFFBQUksRUFBRSxJQUFJO0FBQ1YsYUFBUyxFQUFFLFVBQVU7R0FDdEIsRUFBQztBQUNBLFNBQUssRUFBRSxhQUFhO0FBQ3BCLFNBQUssRUFBRSxjQUFjO0FBQ3JCLFlBQVEsRUFBRSxhQUFhO0FBQ3ZCLFFBQUksRUFBRSxJQUFJO0FBQ1YsYUFBUyxFQUFFLGFBQWE7R0FDekIsRUFBQztBQUNBLFNBQUssRUFBRSxhQUFhO0FBQ3BCLFNBQUssRUFBRSxjQUFjO0FBQ3JCLFlBQVEsRUFBRSxhQUFhO0FBQ3ZCLFFBQUksRUFBRSxJQUFJO0FBQ1YsYUFBUyxFQUFFLGFBQWE7R0FDekIsRUFBRTtBQUNELFNBQUssRUFBRSxVQUFVO0FBQ2pCLFNBQUssRUFBRSxVQUFVO0FBQ2pCLFFBQUksRUFBRSxJQUFJO0dBQ1gsRUFBRTtBQUNELFNBQUssRUFBRSxXQUFXO0FBQ2xCLFNBQUssRUFBRSxZQUFZO0FBQ25CLFFBQUksRUFBRSxJQUFJO0dBQ1gsQ0FBQyxDQUFDO0NBS04sQ0FBQyxDQUFBIiwiZmlsZSI6InNyYy9qcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdOb3J0aHdpbmQnKVxuXG4uY29udHJvbGxlcignZGFzaENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCAkcSwgc2ltcGxlQVBJLCBOZ1RhYmxlUGFyYW1zKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly8gdm0udGFibGUgPSB7YmFzZTogJycsIGpvaW46ICcnfVxuXG5cdHZtLmRiSGVhZGVycyA9IHtcblx0XHRiYXNlOiBbJycsICdwcm9kdWN0cycsICdvcmRlcnMnLCAnY3VzdG9tZXJzJywgJ2VtcGxveWVlcycsICdzdXBwbGllcnMnLCAnY2F0ZWdvcmllcycsICdzaGlwcGVycycsICdvcmRlcl9pZCcsIFxuXHRcdCd0ZXJyaXRvcmllcycsICdyZWdpb24nLCAnY3VzdG9tZXJkZW1vZ3JhcGhpY3MnXVxuXHR9IFxuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuXHRcdGNvbnNvbGUubG9nKGlucHV0KVxuXHRcdHNpbXBsZUFQSS5nZXREeW5hbWljKGlucHV0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdHZtLmRhdGEgPSByZXNwb25zZS5kYXRhO1x0XHRcdFxuXHRcdFx0dm0uaGVhZGVycyA9IE9iamVjdC5rZXlzKHJlc3BvbnNlLmRhdGFbMF0pXG5cdFx0fSlcblx0fVxuXG5cblx0dm0ub3B0aW9ucyA9IHtcblx0ICAgIGNoYXJ0OiB7XG5cdCAgICAgICAgdHlwZTogJ3N0YWNrZWRBcmVhQ2hhcnQnLFxuXHQgICAgICAgIGhlaWdodDogNDUwLFxuXHQgICAgICAgIG1hcmdpbiA6IHtcblx0ICAgICAgICAgICAgdG9wOiAyMCxcblx0ICAgICAgICAgICAgcmlnaHQ6IDIwLFxuXHQgICAgICAgICAgICBib3R0b206IDYwLFxuXHQgICAgICAgICAgICBsZWZ0OiA0MFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgeDogZnVuY3Rpb24oZCl7cmV0dXJuIGRbMF07fSxcblx0ICAgICAgICB5OiBmdW5jdGlvbihkKXtyZXR1cm4gZFsxXTt9LFxuXHQgICAgICAgIHVzZVZvcm9ub2k6IGZhbHNlLFxuXHQgICAgICAgIGNsaXBFZGdlOiB0cnVlLFxuXHQgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogNTAwLFxuXHQgICAgICAgIHVzZUludGVyYWN0aXZlR3VpZGVsaW5lOiB0cnVlLFxuXHQgICAgICAgIHhBeGlzOiB7XG5cdCAgICAgICAgICAgIHNob3dNYXhNaW46IGZhbHNlLFxuXHQgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZDMudGltZS5mb3JtYXQoJyV4JykobmV3IERhdGUoZCkpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIHlBeGlzOiB7XG5cdCAgICAgICAgICAgIHRpY2tGb3JtYXQ6IGZ1bmN0aW9uKGQpe1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgnLC4yZicpKGQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuICAgIH07XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgXHRzaW1wbGVBUEkuZXh0U2FsZXNNZXRyaWNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0ICAgIFx0Y29uc29sZS5sb2cocmVzdWx0KTtcblx0ICAgIFx0dm0uc2FsZXNNZXRyaWNzID0gcmVzdWx0O1xuICAgIFx0fSk7XG4gICAgfSkoKTtcblxuICB0aGlzLmNvbHMgPSBbe1xuICAgICAgZmllbGQ6IFwiUHJvZHVjdE5hbWVcIixcbiAgICAgIHRpdGxlOiBcIlByb2R1Y3QgTmFtZVwiLFxuICAgICAgc29ydGFibGU6IFwiUHJvZHVjdE5hbWVcIixcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBncm91cGFibGU6IFwiUHJvZHVjdE5hbWVcIlxuICAgIH0sIHtcbiAgICAgIGZpZWxkOiBcIk9yZGVyRGF0ZVwiLFxuICAgICAgdGl0bGU6IFwiT3JkZXIgRGF0ZVwiLFxuICAgICAgc29ydGFibGU6IFwiT3JkZXJEYXRlXCIsXG4gICAgICBzaG93OiB0cnVlLFxuICAgICAgZ3JvdXBhYmxlOiBcIk9yZGVyRGF0ZVwiXG4gICAgfSwge1xuICAgICAgZmllbGQ6IFwiU2hpcENpdHlcIixcbiAgICAgIHRpdGxlOiBcIlNoaXAgQ2l0eVwiLFxuICAgICAgc29ydGFibGU6IFwiU2hpcENpdHlcIixcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBncm91cGFibGU6IFwiU2hpcENpdHlcIlxuICAgIH0se1xuICAgICAgZmllbGQ6IFwiU2hpcENvdW50cnlcIixcbiAgICAgIHRpdGxlOiBcIlNoaXAgQ291bnRyeVwiLFxuICAgICAgc29ydGFibGU6IFwiU2hpcENvdW50cnlcIixcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBncm91cGFibGU6IFwiU2hpcENvdW50cnlcIlxuICAgIH0se1xuICAgICAgZmllbGQ6IFwiU2hpcHBlZERhdGVcIixcbiAgICAgIHRpdGxlOiBcIlNoaXBwZWQgRGF0ZVwiLFxuICAgICAgc29ydGFibGU6IFwiU2hpcHBlZERhdGVcIixcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBncm91cGFibGU6IFwiU2hpcHBlZERhdGVcIlxuICAgIH0sIHtcbiAgICAgIGZpZWxkOiBcIlF1YW50aXR5XCIsXG4gICAgICB0aXRsZTogXCJRdWFudGl0eVwiLFxuICAgICAgc2hvdzogdHJ1ZSxcbiAgICB9LCB7XG4gICAgICBmaWVsZDogXCJVbml0UHJpY2VcIixcbiAgICAgIHRpdGxlOiBcIlVuaXQgUHJpY2VcIixcbiAgICAgIHNob3c6IHRydWVcbiAgICB9XTtcblxuXG5cblxufSlcbiJdfQ==
