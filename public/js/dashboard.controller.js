'use strict';

angular.module('Northwind').controller('dashController', function ($scope, $q, simpleAPI) {
	var vm = this;

	// vm.table = {base: '', join: ''}

	vm.dbHeaders = {
		base: ['', 'products', 'orders', 'customers', 'suppliers', 'categories', 'shippers']
	};

	vm.submit = function (input) {
		console.log(input);
		simpleAPI.getDynamic(input, function (response) {
			vm.data = response.data;
			vm.headers = Object.keys(response.data[0]);
		});
	};

	vm.options = {
		chart: {
			type: 'stackedAreaChart',
			height: 450,
			margin: {
				top: 20,
				right: 20,
				bottom: 60,
				left: 40
			},
			x: function x(d) {
				return d[0];
			},
			y: function y(d) {
				return d[1];
			},
			useVoronoi: false,
			clipEdge: true,
			transitionDuration: 500,
			useInteractiveGuideline: true,
			xAxis: {
				showMaxMin: false,
				tickFormat: function tickFormat(d) {
					return d3.time.format('%x')(new Date(d));
				}
			},
			yAxis: {
				tickFormat: function tickFormat(d) {
					return d3.format(',.2f')(d);
				}
			}
		}
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBRTFCLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFO0FBQzlELEtBQUksRUFBRSxHQUFHLElBQUksQ0FBQzs7OztBQUlkLEdBQUUsQ0FBQyxTQUFTLEdBQUc7QUFDZCxNQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxVQUFVLENBQUM7RUFDcEYsQ0FBQTs7QUFFRCxHQUFFLENBQUMsTUFBTSxHQUFHLFVBQVUsS0FBSyxFQUFFO0FBQzVCLFNBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDbEIsV0FBUyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxRQUFRLEVBQUU7QUFDL0MsS0FBRSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3hCLEtBQUUsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7R0FDMUMsQ0FBQyxDQUFBO0VBQ0YsQ0FBQTs7QUFHRCxHQUFFLENBQUMsT0FBTyxHQUFHO0FBQ1QsT0FBSyxFQUFFO0FBQ0gsT0FBSSxFQUFFLGtCQUFrQjtBQUN4QixTQUFNLEVBQUUsR0FBRztBQUNYLFNBQU0sRUFBRztBQUNMLE9BQUcsRUFBRSxFQUFFO0FBQ1AsU0FBSyxFQUFFLEVBQUU7QUFDVCxVQUFNLEVBQUUsRUFBRTtBQUNWLFFBQUksRUFBRSxFQUFFO0lBQ1g7QUFDRCxJQUFDLEVBQUUsV0FBUyxDQUFDLEVBQUM7QUFBQyxXQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUFDO0FBQzVCLElBQUMsRUFBRSxXQUFTLENBQUMsRUFBQztBQUFDLFdBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQUM7QUFDNUIsYUFBVSxFQUFFLEtBQUs7QUFDakIsV0FBUSxFQUFFLElBQUk7QUFDZCxxQkFBa0IsRUFBRSxHQUFHO0FBQ3ZCLDBCQUF1QixFQUFFLElBQUk7QUFDN0IsUUFBSyxFQUFFO0FBQ0gsY0FBVSxFQUFFLEtBQUs7QUFDakIsY0FBVSxFQUFFLG9CQUFTLENBQUMsRUFBRTtBQUNwQixZQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDM0M7SUFDSjtBQUNELFFBQUssRUFBRTtBQUNILGNBQVUsRUFBRSxvQkFBUyxDQUFDLEVBQUM7QUFDbkIsWUFBTyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQy9CO0lBQ0o7R0FDSjtFQUNELENBQUE7Q0FHSixDQUFDLENBQUEiLCJmaWxlIjoic3JjL2pzL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ05vcnRod2luZCcpXG5cbi5jb250cm9sbGVyKCdkYXNoQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRxLCBzaW1wbGVBUEkpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvLyB2bS50YWJsZSA9IHtiYXNlOiAnJywgam9pbjogJyd9XG5cblx0dm0uZGJIZWFkZXJzID0ge1xuXHRcdGJhc2U6IFsnJywgJ3Byb2R1Y3RzJywgJ29yZGVycycsICdjdXN0b21lcnMnLCAnc3VwcGxpZXJzJywgJ2NhdGVnb3JpZXMnLCAnc2hpcHBlcnMnXVxuXHR9IFxuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuXHRcdGNvbnNvbGUubG9nKGlucHV0KVxuXHRcdHNpbXBsZUFQSS5nZXREeW5hbWljKGlucHV0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdHZtLmRhdGEgPSByZXNwb25zZS5kYXRhO1x0XHRcdFxuXHRcdFx0dm0uaGVhZGVycyA9IE9iamVjdC5rZXlzKHJlc3BvbnNlLmRhdGFbMF0pXG5cdFx0fSlcblx0fVxuXG5cblx0dm0ub3B0aW9ucyA9IHtcblx0ICAgIGNoYXJ0OiB7XG5cdCAgICAgICAgdHlwZTogJ3N0YWNrZWRBcmVhQ2hhcnQnLFxuXHQgICAgICAgIGhlaWdodDogNDUwLFxuXHQgICAgICAgIG1hcmdpbiA6IHtcblx0ICAgICAgICAgICAgdG9wOiAyMCxcblx0ICAgICAgICAgICAgcmlnaHQ6IDIwLFxuXHQgICAgICAgICAgICBib3R0b206IDYwLFxuXHQgICAgICAgICAgICBsZWZ0OiA0MFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgeDogZnVuY3Rpb24oZCl7cmV0dXJuIGRbMF07fSxcblx0ICAgICAgICB5OiBmdW5jdGlvbihkKXtyZXR1cm4gZFsxXTt9LFxuXHQgICAgICAgIHVzZVZvcm9ub2k6IGZhbHNlLFxuXHQgICAgICAgIGNsaXBFZGdlOiB0cnVlLFxuXHQgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogNTAwLFxuXHQgICAgICAgIHVzZUludGVyYWN0aXZlR3VpZGVsaW5lOiB0cnVlLFxuXHQgICAgICAgIHhBeGlzOiB7XG5cdCAgICAgICAgICAgIHNob3dNYXhNaW46IGZhbHNlLFxuXHQgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZDMudGltZS5mb3JtYXQoJyV4JykobmV3IERhdGUoZCkpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIHlBeGlzOiB7XG5cdCAgICAgICAgICAgIHRpY2tGb3JtYXQ6IGZ1bmN0aW9uKGQpe1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgnLC4yZicpKGQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuICAgIH1cblxuXG59KVxuIl19
