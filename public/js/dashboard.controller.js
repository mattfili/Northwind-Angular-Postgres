'use strict';

angular.module('Northwind').controller('dashController', function ($scope, $q, simpleAPI) {
	var vm = this;

	// vm.table = {base: '', join: ''}

	vm.dbHeaders = {
		base: ['', 'products', 'orders', 'customers', 'employees', 'suppliers', 'categories', 'shippers', 'order_id', 'territories', 'region', 'customerdemographics']
	};

	vm.submit = function (input) {
		console.log(input);
		simpleAPI.getDynamic(input, function (response) {
			vm.data = response.data;
			vm.headers = Object.keys(response.data[0]);
		});
	};

	vm.options = {
		chart: {
			type: 'stackedAreaChart',
			height: 450,
			margin: {
				top: 20,
				right: 20,
				bottom: 60,
				left: 40
			},
			x: function x(d) {
				return d[0];
			},
			y: function y(d) {
				return d[1];
			},
			useVoronoi: false,
			clipEdge: true,
			transitionDuration: 500,
			useInteractiveGuideline: true,
			xAxis: {
				showMaxMin: false,
				tickFormat: function tickFormat(d) {
					return d3.time.format('%x')(new Date(d));
				}
			},
			yAxis: {
				tickFormat: function tickFormat(d) {
					return d3.format(',.2f')(d);
				}
			}
		}
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBRTFCLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFO0FBQzlELEtBQUksRUFBRSxHQUFHLElBQUksQ0FBQzs7OztBQUlkLEdBQUUsQ0FBQyxTQUFTLEdBQUc7QUFDZCxNQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFDNUcsYUFBYSxFQUFFLFFBQVEsRUFBRSxzQkFBc0IsQ0FBQztFQUNoRCxDQUFBOztBQUVELEdBQUUsQ0FBQyxNQUFNLEdBQUcsVUFBVSxLQUFLLEVBQUU7QUFDNUIsU0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUNsQixXQUFTLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLFFBQVEsRUFBRTtBQUMvQyxLQUFFLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7QUFDeEIsS0FBRSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtHQUMxQyxDQUFDLENBQUE7RUFDRixDQUFBOztBQUdELEdBQUUsQ0FBQyxPQUFPLEdBQUc7QUFDVCxPQUFLLEVBQUU7QUFDSCxPQUFJLEVBQUUsa0JBQWtCO0FBQ3hCLFNBQU0sRUFBRSxHQUFHO0FBQ1gsU0FBTSxFQUFHO0FBQ0wsT0FBRyxFQUFFLEVBQUU7QUFDUCxTQUFLLEVBQUUsRUFBRTtBQUNULFVBQU0sRUFBRSxFQUFFO0FBQ1YsUUFBSSxFQUFFLEVBQUU7SUFDWDtBQUNELElBQUMsRUFBRSxXQUFTLENBQUMsRUFBQztBQUFDLFdBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQUM7QUFDNUIsSUFBQyxFQUFFLFdBQVMsQ0FBQyxFQUFDO0FBQUMsV0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFBQztBQUM1QixhQUFVLEVBQUUsS0FBSztBQUNqQixXQUFRLEVBQUUsSUFBSTtBQUNkLHFCQUFrQixFQUFFLEdBQUc7QUFDdkIsMEJBQXVCLEVBQUUsSUFBSTtBQUM3QixRQUFLLEVBQUU7QUFDSCxjQUFVLEVBQUUsS0FBSztBQUNqQixjQUFVLEVBQUUsb0JBQVMsQ0FBQyxFQUFFO0FBQ3BCLFlBQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUMzQztJQUNKO0FBQ0QsUUFBSyxFQUFFO0FBQ0gsY0FBVSxFQUFFLG9CQUFTLENBQUMsRUFBQztBQUNuQixZQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDL0I7SUFDSjtHQUNKO0VBQ0QsQ0FBQTtDQUdKLENBQUMsQ0FBQSIsImZpbGUiOiJzcmMvanMvZGFzaGJvYXJkLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnTm9ydGh3aW5kJylcblxuLmNvbnRyb2xsZXIoJ2Rhc2hDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHEsIHNpbXBsZUFQSSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vIHZtLnRhYmxlID0ge2Jhc2U6ICcnLCBqb2luOiAnJ31cblxuXHR2bS5kYkhlYWRlcnMgPSB7XG5cdFx0YmFzZTogWycnLCAncHJvZHVjdHMnLCAnb3JkZXJzJywgJ2N1c3RvbWVycycsICdlbXBsb3llZXMnLCAnc3VwcGxpZXJzJywgJ2NhdGVnb3JpZXMnLCAnc2hpcHBlcnMnLCAnb3JkZXJfaWQnLCBcblx0XHQndGVycml0b3JpZXMnLCAncmVnaW9uJywgJ2N1c3RvbWVyZGVtb2dyYXBoaWNzJ11cblx0fSBcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbiAoaW5wdXQpIHtcblx0XHRjb25zb2xlLmxvZyhpbnB1dClcblx0XHRzaW1wbGVBUEkuZ2V0RHluYW1pYyhpbnB1dCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHR2bS5kYXRhID0gcmVzcG9uc2UuZGF0YTtcdFx0XHRcblx0XHRcdHZtLmhlYWRlcnMgPSBPYmplY3Qua2V5cyhyZXNwb25zZS5kYXRhWzBdKVxuXHRcdH0pXG5cdH1cblxuXG5cdHZtLm9wdGlvbnMgPSB7XG5cdCAgICBjaGFydDoge1xuXHQgICAgICAgIHR5cGU6ICdzdGFja2VkQXJlYUNoYXJ0Jyxcblx0ICAgICAgICBoZWlnaHQ6IDQ1MCxcblx0ICAgICAgICBtYXJnaW4gOiB7XG5cdCAgICAgICAgICAgIHRvcDogMjAsXG5cdCAgICAgICAgICAgIHJpZ2h0OiAyMCxcblx0ICAgICAgICAgICAgYm90dG9tOiA2MCxcblx0ICAgICAgICAgICAgbGVmdDogNDBcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHg6IGZ1bmN0aW9uKGQpe3JldHVybiBkWzBdO30sXG5cdCAgICAgICAgeTogZnVuY3Rpb24oZCl7cmV0dXJuIGRbMV07fSxcblx0ICAgICAgICB1c2VWb3Jvbm9pOiBmYWxzZSxcblx0ICAgICAgICBjbGlwRWRnZTogdHJ1ZSxcblx0ICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0ICAgICAgICB1c2VJbnRlcmFjdGl2ZUd1aWRlbGluZTogdHJ1ZSxcblx0ICAgICAgICB4QXhpczoge1xuXHQgICAgICAgICAgICBzaG93TWF4TWluOiBmYWxzZSxcblx0ICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGQzLnRpbWUuZm9ybWF0KCcleCcpKG5ldyBEYXRlKGQpKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB5QXhpczoge1xuXHQgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKXtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoJywuMmYnKShkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cbiAgICB9XG5cblxufSlcbiJdfQ==
