'use strict';

angular.module('Northwind').controller('dashController', function ($scope, $q, simpleAPI) {
	var vm = this;

	vm.table = { base: '', join: '' };

	vm.dbHeaders = {
		base: ['products', 'orders', 'customers', 'suppliers', 'categories', 'shippers']
	};

	vm.submit = function (input) {
		simpleAPI.getDynamic(input, function (response) {
			vm.data = response.data;
			vm.headers = Object.keys(response.data[0]);
		});
	};

	// marketing

	simpleAPI.getDynamic('orders', function (response) {
		vm.orders = response;
	});

	vm.options = {
		chart: {
			type: 'stackedAreaChart',
			height: 450,
			margin: {
				top: 20,
				right: 20,
				bottom: 60,
				left: 40
			},
			x: function x(d) {
				return d[0];
			},
			y: function y(d) {
				return d[1];
			},
			useVoronoi: false,
			clipEdge: true,
			transitionDuration: 500,
			useInteractiveGuideline: true,
			xAxis: {
				showMaxMin: false,
				tickFormat: function tickFormat(d) {
					return d3.time.format('%x')(new Date(d));
				}
			},
			yAxis: {
				tickFormat: function tickFormat(d) {
					return d3.format(',.2f')(d);
				}
			}
		}
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBRTFCLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLE1BQU0sRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFO0FBQzlELEtBQUksRUFBRSxHQUFHLElBQUksQ0FBQzs7QUFFZCxHQUFFLENBQUMsS0FBSyxHQUFHLEVBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFDLENBQUE7O0FBRS9CLEdBQUUsQ0FBQyxTQUFTLEdBQUc7QUFDZCxNQUFJLEVBQUUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFVBQVUsQ0FBQztFQUNoRixDQUFBOztBQUVELEdBQUUsQ0FBQyxNQUFNLEdBQUcsVUFBVSxLQUFLLEVBQUU7QUFDNUIsV0FBUyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxRQUFRLEVBQUU7QUFDL0MsS0FBRSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3hCLEtBQUUsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7R0FDMUMsQ0FBQyxDQUFDO0VBQ0gsQ0FBQTs7OztBQUlBLFVBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLFVBQVUsUUFBUSxFQUFFO0FBQ2xELElBQUUsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO0VBQ3JCLENBQUMsQ0FBQTs7QUFHSCxHQUFFLENBQUMsT0FBTyxHQUFHO0FBQ1QsT0FBSyxFQUFFO0FBQ0gsT0FBSSxFQUFFLGtCQUFrQjtBQUN4QixTQUFNLEVBQUUsR0FBRztBQUNYLFNBQU0sRUFBRztBQUNMLE9BQUcsRUFBRSxFQUFFO0FBQ1AsU0FBSyxFQUFFLEVBQUU7QUFDVCxVQUFNLEVBQUUsRUFBRTtBQUNWLFFBQUksRUFBRSxFQUFFO0lBQ1g7QUFDRCxJQUFDLEVBQUUsV0FBUyxDQUFDLEVBQUM7QUFBQyxXQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUFDO0FBQzVCLElBQUMsRUFBRSxXQUFTLENBQUMsRUFBQztBQUFDLFdBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQUM7QUFDNUIsYUFBVSxFQUFFLEtBQUs7QUFDakIsV0FBUSxFQUFFLElBQUk7QUFDZCxxQkFBa0IsRUFBRSxHQUFHO0FBQ3ZCLDBCQUF1QixFQUFFLElBQUk7QUFDN0IsUUFBSyxFQUFFO0FBQ0gsY0FBVSxFQUFFLEtBQUs7QUFDakIsY0FBVSxFQUFFLG9CQUFTLENBQUMsRUFBRTtBQUNwQixZQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDM0M7SUFDSjtBQUNELFFBQUssRUFBRTtBQUNILGNBQVUsRUFBRSxvQkFBUyxDQUFDLEVBQUM7QUFDbkIsWUFBTyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQy9CO0lBQ0o7R0FDSjtFQUNELENBQUE7Q0FHSixDQUFDLENBQUEiLCJmaWxlIjoic3JjL2pzL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ05vcnRod2luZCcpXG5cbi5jb250cm9sbGVyKCdkYXNoQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRxLCBzaW1wbGVBUEkpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHR2bS50YWJsZSA9IHtiYXNlOiAnJywgam9pbjogJyd9XG5cblx0dm0uZGJIZWFkZXJzID0ge1xuXHRcdGJhc2U6IFsncHJvZHVjdHMnLCAnb3JkZXJzJywgJ2N1c3RvbWVycycsICdzdXBwbGllcnMnLCAnY2F0ZWdvcmllcycsICdzaGlwcGVycyddXG5cdH0gXG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24gKGlucHV0KSB7XG5cdFx0c2ltcGxlQVBJLmdldER5bmFtaWMoaW5wdXQsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0dm0uZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHRcdFx0XG5cdFx0XHR2bS5oZWFkZXJzID0gT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YVswXSlcblx0XHR9KTtcblx0fVxuXG5cdC8vIG1hcmtldGluZ1xuXG5cdFx0c2ltcGxlQVBJLmdldER5bmFtaWMoJ29yZGVycycsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0dm0ub3JkZXJzID0gcmVzcG9uc2U7XG5cdFx0fSlcblxuXG5cdHZtLm9wdGlvbnMgPSB7XG5cdCAgICBjaGFydDoge1xuXHQgICAgICAgIHR5cGU6ICdzdGFja2VkQXJlYUNoYXJ0Jyxcblx0ICAgICAgICBoZWlnaHQ6IDQ1MCxcblx0ICAgICAgICBtYXJnaW4gOiB7XG5cdCAgICAgICAgICAgIHRvcDogMjAsXG5cdCAgICAgICAgICAgIHJpZ2h0OiAyMCxcblx0ICAgICAgICAgICAgYm90dG9tOiA2MCxcblx0ICAgICAgICAgICAgbGVmdDogNDBcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHg6IGZ1bmN0aW9uKGQpe3JldHVybiBkWzBdO30sXG5cdCAgICAgICAgeTogZnVuY3Rpb24oZCl7cmV0dXJuIGRbMV07fSxcblx0ICAgICAgICB1c2VWb3Jvbm9pOiBmYWxzZSxcblx0ICAgICAgICBjbGlwRWRnZTogdHJ1ZSxcblx0ICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0ICAgICAgICB1c2VJbnRlcmFjdGl2ZUd1aWRlbGluZTogdHJ1ZSxcblx0ICAgICAgICB4QXhpczoge1xuXHQgICAgICAgICAgICBzaG93TWF4TWluOiBmYWxzZSxcblx0ICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGQzLnRpbWUuZm9ybWF0KCcleCcpKG5ldyBEYXRlKGQpKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB5QXhpczoge1xuXHQgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKXtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoJywuMmYnKShkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cbiAgICB9XG5cblxufSlcbiJdfQ==
